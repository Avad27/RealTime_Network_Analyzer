<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Analysis Results</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body style="background-color:#0d1117; color:white;">
  <div class="container text-center mt-5">
    <h2 class="fw-bold mb-4">üìä Network Analysis Results</h2>

    {% if results %}
      <h4>File: {{ results.filename if results.filename else 'Unknown File' }}</h4>
      <p>Total Flows: {{ results.total_packets }}</p>
      <p>Normal Flows: {{ results.normal }}</p>
      <p>Attack Flows: {{ results.attack }}</p>
      <h3 class="text-warning mt-3">‚ö†Ô∏è Attack Percentage: {{ results.attack_percentage }}%</h3>

      <div class="col-md-6 mx-auto mt-5">
        <canvas id="chart"></canvas>
      </div>

      <a href="/" class="btn btn-success mt-4">‚¨ÖÔ∏è Back to Upload</a>

      <script>
        const ctx = document.getElementById('chart');
        new Chart(ctx, {
          type: 'doughnut',
          data: {
            labels: ['Normal', 'Attack'],
            datasets: [{
              data: [{{ results.normal }}, {{ results.attack }}],
              backgroundColor: ['#238636', '#f85149']
            }]
          },
          options: { plugins: { legend: { labels: { color: 'white' }}}}
        });
      </script>
    {% else %}
      <h3 class="text-danger">‚ùå No results available. Please upload a valid PCAP file.</h3>
      <a href="/" class="btn btn-primary mt-4">Try Again</a>
    {% endif %}
  </div>
</body>
</html>
